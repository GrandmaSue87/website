<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Little Snow White</title>
    <meta
      name="description"
      content="A cozy original retelling of Little Snow White, inspired by the 1812 Brothers Grimm tale and narrated by Grandma Sue."
    />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="RetroReadAlong" />
    <meta property="og:title" content="Little Snow White" />
    <meta
      property="og:description"
      content="A cozy original retelling of Little Snow White, inspired by the 1812 Brothers Grimm tale and narrated by Grandma Sue."
    />
    <meta
      property="og:url"
      content="https://www.retroreadalong.com/books/GSL_OR_005_Little_Snow_White/"
    />
    <meta
      property="og:image"
      content="https://www.retroreadalong.com/books/GSL_OR_005_Little_Snow_White/jpg/front_cover.jpg"
    />
    <meta property="og:image:alt" content="Little Snow White book cover" />
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:title" content="Little Snow White" />
    <meta
      property="twitter:description"
      content="A cozy original retelling of Little Snow White, inspired by the 1812 Brothers Grimm tale and narrated by Grandma Sue."
    />
    <meta
      property="twitter:image"
      content="https://www.retroreadalong.com/books/GSL_OR_005_Little_Snow_White/jpg/front_cover.jpg"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500;600&family=Source+Sans+3:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../../styles.css" />
    <style>
      .time-readout {
        font-size: 13px;
        color: var(--muted);
        text-align: right;
        margin-top: -4px;
      }
    </style>
  </head>
  <body>
    <header class="site-header">
      <div class="wrapper">
        <a class="logo" href="../../index.html" aria-label="Go to home page">
          <img class="logo-mark" src="../../sample_files/colorlogo2.png" alt="Retro Read Along logo" />
          Retro Read Along
        </a>

        <section class="book-hero">
          <div class="book-meta">
            <h1 class="section-title">Little Snow White</h1>
            <p>
              This cozy original retelling of Little Snow White is inspired by the Brothers Grimm's 1812 tale,
              reimagined with warm words and pictures by Grandma Sue and P.A.I.G.E. It keeps the timeless wonder
              of the classic while offering a gentle, hearthside style made for read-along moments together.
            </p>
            <div class="tags">
              <span class="tag" title="Category: original read-along">original read-along</span>
              <span class="tag" title="Collection: retro read along | season 1">retro read along | season 1</span>
              <span class="tag" title="Year: 2026">2026</span>
            </div>
            <ul>
              <li><span>Year:</span> 2026</li>
              <li><span>Author:</span> Grandma Sue &amp; P.A.I.G.E (based on Brothers Grimm, 1812)</li>
              <li><span>Illustrator:</span> Grandma Sue &amp; P.A.I.G.E</li>
              <li><span>Narrator:</span> Grandma Sue</li>
              <li><span>Publisher:</span> Amazon Kindle Direct Publishing</li>
              <li><span>Grandma Sue Library No:</span> GSL-OR-005</li>
            </ul>
          </div>
          <div class="cover">
            <img src="jpg/front_cover.jpg" alt="Little Snow White cover" />
          </div>
        </section>
      </div>
    </header>

    <main class="wrapper">
      <section class="viewer" aria-label="Read along viewer">
        <div class="spread" id="spread-view">
          <img id="page-left" alt="Story page left" />
          <img id="page-right" alt="Story page right" />
        </div>

        <div class="audio-controls" aria-label="Read-along controls">
          <input
            type="range"
            id="progress"
            class="progress"
            min="0"
            max="0"
            step="0.01"
            value="0"
            aria-label="Audio progress"
          />
          <div id="time-readout" class="time-readout" aria-live="polite">0:00 / 0:00</div>
          <div class="controls-bar">
            <button class="control-btn" id="prev" title="Previous spread" aria-label="Previous spread">
              <img src="../../assets/icons/left.svg" alt="" aria-hidden="true" />
            </button>
            <button class="control-btn play" id="play" title="Listen" aria-label="Listen">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path fill="currentColor" d="M8 5v14l11-7z" />
              </svg>
            </button>
            <button class="control-btn" id="next" title="Next spread" aria-label="Next spread">
              <img src="../../assets/icons/right.svg" alt="" aria-hidden="true" />
            </button>
          </div>
        </div>

        <audio id="audio" src="little_snow_white_audio.mp3" preload="auto"></audio>
      </section>

      <section class="extras" aria-label="Other ways to enjoy this story">
        <div class="extras-title">Other ways to enjoy this story</div>
        <div class="action-row">
          <button class="action hifi-action" id="share" title="Read with a friend" aria-label="Read with a friend" type="button">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path fill="currentColor" d="M21.5 3.5l-2 16c-.1.7-.8 1.1-1.5.8l-5.9-2.4-3.1 3.2c-.3.3-.8.4-1.2.2-.4-.2-.6-.6-.6-1v-4.1l9-8.8-11 7c-.5.3-1.2.1-1.5-.4L1.2 9.7c-.3-.5-.1-1.2.5-1.4l18.2-5.9c.8-.3 1.6.4 1.5 1.1z" />
            </svg>
          </button>
          <a
            class="action hifi-action"
            href="https://youtu.be/ghwm44Yjezs"
            title="Watch on YouTube"
            aria-label="Watch on YouTube"
            target="_blank"
            rel="noopener noreferrer"
          >
            <img src="../../assets/icons/youtube.svg" alt="" aria-hidden="true" />
          </a>
          <a
            class="action hifi-action"
            href="https://open.spotify.com/episode/7aQ1O9ea3Wbou09FhDwG1Q?si=98GF401CQUCEQZl7rJdR3g"
            title="Listen on Spotify"
            aria-label="Listen on Spotify"
            target="_blank"
            rel="noopener noreferrer"
          >
            <img src="../../assets/icons/podcast.svg" alt="" aria-hidden="true" />
          </a>
          <a
            class="action hifi-action"
            href="https://www.amazon.com/dp/B0GPHMKH28?ref=sp_email"
            title="Purchase on Amazon"
            aria-label="Purchase on Amazon"
            target="_blank"
            rel="noopener noreferrer"
          >
            <img src="../../assets/icons/purchase.svg" alt="" aria-hidden="true" />
          </a>
        </div>
      </section>
    </main>

    <script>
      const pages = [
        "images/000_attention.png",
        "images/00_This book belongs to.png",
        "images/0_Title.png",
        "images/1.png",
        "images/2.png",
        "images/3.png",
        "images/4.png",
        "images/5.png",
        "images/6.png",
        "images/7.png",
        "images/8.png",
        "images/9.png",
        "images/10.png",
        "images/11.png",
        "images/12.png",
        "images/13.png",
        "images/14.png",
        "images/15.png",
        "images/16.png",
        "images/17.png",
        "images/18.png",
        "images/19.png",
        "images/20.png",
        "images/21.png",
        "images/22.png",
        "images/23.png",
        "images/24.png",
        "images/25_record_sleeve.png",
        "images/26_authors.png",
        "images/Back Cover.png",
      ];
      const spreadStep = 2;
      const lastSpreadIndex = pages.length - spreadStep;
      let index = 0;

      const spreadView = document.getElementById("spread-view");
      const left = document.getElementById("page-left");
      const right = document.getElementById("page-right");
      const audio = document.getElementById("audio");
      const playButton = document.getElementById("play");
      const progress = document.getElementById("progress");
      const timeReadout = document.getElementById("time-readout");
      const shareButton = document.getElementById("share");
      let isSeeking = false;
      let touchStartX = 0;
      let touchStartY = 0;
      let suppressClickUntil = 0;

      function render() {
        const leftPage = pages[index];
        const rightPage = pages[index + 1];
        left.src = encodeURI(leftPage);
        left.alt = `Story page ${index + 1}`;
        right.src = encodeURI(rightPage);
        right.alt = `Story page ${index + 2}`;
      }

      function goPrev() {
        index = index === 0 ? lastSpreadIndex : index - spreadStep;
        render();
      }

      function goNext() {
        index = index >= lastSpreadIndex ? 0 : index + spreadStep;
        render();
      }

      function handleTapTurn(clientX) {
        const rect = spreadView.getBoundingClientRect();
        const midpoint = rect.left + rect.width / 2;
        if (clientX < midpoint) {
          goPrev();
        } else {
          goNext();
        }
      }

      function setPlayIcon(isPlaying) {
        playButton.innerHTML = isPlaying
          ? '<svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M7 5h4v14H7zM13 5h4v14h-4z" /></svg>'
          : '<svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M8 5v14l11-7z" /></svg>';
      }

      function formatTime(totalSeconds) {
        if (!Number.isFinite(totalSeconds) || totalSeconds < 0) return "0:00";
        const minutes = Math.floor(totalSeconds / 60);
        const seconds = Math.floor(totalSeconds % 60);
        return `${minutes}:${seconds.toString().padStart(2, "0")}`;
      }

      function updateTimeDisplay() {
        const current = formatTime(audio.currentTime || 0);
        const total = formatTime(audio.duration || 0);
        timeReadout.textContent = `${current} / ${total}`;
      }

      function syncProgressRange() {
        if (!audio.duration || Number.isNaN(audio.duration)) return;
        progress.max = Math.max(1, audio.duration).toString();
        updateTimeDisplay();
      }

      playButton.addEventListener("click", () => {
        if (audio.paused) {
          audio.play();
          setPlayIcon(true);
        } else {
          audio.pause();
          setPlayIcon(false);
        }
      });

      audio.addEventListener("loadedmetadata", syncProgressRange);
      audio.addEventListener("loadeddata", syncProgressRange);
      audio.addEventListener("canplay", syncProgressRange);
      audio.addEventListener("durationchange", syncProgressRange);

      audio.addEventListener("timeupdate", () => {
        if (!audio.duration || Number.isNaN(audio.duration)) return;
        if (progress.max === "0") syncProgressRange();
        if (isSeeking) return;
        progress.value = audio.currentTime.toString();
        updateTimeDisplay();
      });

      audio.addEventListener("ended", () => {
        setPlayIcon(false);
      });

      shareButton.addEventListener("click", async () => {
        const shareData = {
          title: document.title,
          text: "Read with a friend",
          url: window.location.href,
        };

        try {
          if (navigator.share) {
            await navigator.share(shareData);
            return;
          }

          if (navigator.clipboard) {
            await navigator.clipboard.writeText(window.location.href);
            shareButton.title = "Link copied. Read with a friend";
            setTimeout(() => {
              shareButton.title = "Read with a friend";
            }, 2000);
          }
        } catch (error) {
          // User canceled share or browser blocked clipboard.
        }
      });

      progress.addEventListener("pointerdown", () => {
        isSeeking = true;
      });

      progress.addEventListener("pointerup", () => {
        if (!audio.duration || Number.isNaN(audio.duration)) return;
        isSeeking = false;
        audio.currentTime = Number(progress.value);
        updateTimeDisplay();
      });

      progress.addEventListener("change", () => {
        if (!audio.duration || Number.isNaN(audio.duration)) return;
        audio.currentTime = Number(progress.value);
        updateTimeDisplay();
      });

      document.getElementById("prev").addEventListener("click", goPrev);
      document.getElementById("next").addEventListener("click", goNext);

      spreadView.addEventListener("click", (event) => {
        if (Date.now() < suppressClickUntil) return;
        handleTapTurn(event.clientX);
      });

      spreadView.addEventListener(
        "touchstart",
        (event) => {
          const touch = event.changedTouches[0];
          touchStartX = touch.clientX;
          touchStartY = touch.clientY;
        },
        { passive: true }
      );

      spreadView.addEventListener(
        "touchend",
        (event) => {
          const touch = event.changedTouches[0];
          const deltaX = touch.clientX - touchStartX;
          const deltaY = touch.clientY - touchStartY;

          if (Math.abs(deltaX) > 45 && Math.abs(deltaY) < 60) {
            suppressClickUntil = Date.now() + 350;
            if (deltaX < 0) {
              goNext();
            } else {
              goPrev();
            }
            return;
          }

          handleTapTurn(touch.clientX);
        },
        { passive: true }
      );

      render();
      updateTimeDisplay();
    </script>
  </body>
</html>
